(self.webpackChunkpodbook=self.webpackChunkpodbook||[]).push([[820],{5820:(n,t,e)=>{"use strict";e.r(t),e.d(t,{SignUpModule:()=>E});var s=e(8583),o=e(519),i=e(2729),r=e(5262),a=e(4911),c=e(7709),p=e(6782),g=e(639),u=e(3342),l=e(2340),d=e(1841),f=e(1088);let m=(()=>{class n{constructor(n,t){this.http=n,this.userService=t}signup(n){const{host:t,port:e,url:s}=l.N.apiRequest;return this.http.post(`${t}:${e}${s}/sign-up`,n,{observe:"response"}).pipe((0,u.b)(n=>{const t=n.headers.get("x-auth-token");this.userService.setToken(t)}))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(d.eN),g.LFG(f.K))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var h=e(2232);const M=["password"],C=["repeatPassword"];function O(n,t){1&n&&g._UZ(0,"img",15)}function P(n,t){if(1&n&&(g.TgZ(0,"label"),g._uU(1),g.qZA()),2&n){const n=g.oxw().index;g.xp6(1),g.Oqu(n+1)}}const _=function(n){return{"--active":n}};function v(n,t){if(1&n&&(g.TgZ(0,"div",9),g.TgZ(1,"span",10),g.YNc(2,O,1,0,"img",11),g.YNc(3,P,2,1,"label",12),g.qZA(),g._UZ(4,"span",13),g.TgZ(5,"span",14),g._uU(6),g.qZA(),g.qZA()),2&n){const n=t.$implicit;g.Q6J("ngClass",g.VKq(5,_,n.active)),g.uIk("name",n.name),g.xp6(2),g.Q6J("ngIf",n.finished),g.xp6(1),g.Q6J("ngIf",!n.finished),g.xp6(3),g.Oqu(n.name)}}function b(n,t){1&n&&g.GkF(0)}function w(n,t){if(1&n&&(g.TgZ(0,"div"),g.YNc(1,b,1,0,"ng-container",16),g.qZA()),2&n){g.oxw();const n=g.MAs(8);g.xp6(1),g.Q6J("ngTemplateOutlet",n)}}function x(n,t){1&n&&g.GkF(0)}function k(n,t){if(1&n&&(g.TgZ(0,"div"),g.YNc(1,x,1,0,"ng-container",16),g.qZA()),2&n){g.oxw();const n=g.MAs(10);g.xp6(1),g.Q6J("ngTemplateOutlet",n)}}function S(n,t){1&n&&g.GkF(0)}function Z(n,t){if(1&n){const n=g.EpF();g.TgZ(0,"div",17),g.TgZ(1,"form"),g._UZ(2,"pod-form-field",18,19),g._UZ(4,"pod-form-field",20,21),g.TgZ(6,"button",22),g.NdJ("click",function(t){g.CHM(n);const e=g.MAs(3),s=g.MAs(5);return g.oxw().nextStep(t,[e,s])}),g._uU(7,"Next"),g.qZA(),g.qZA(),g.YNc(8,S,1,0,"ng-container",16),g.qZA()}if(2&n){const n=g.oxw(),t=g.MAs(12);g.xp6(2),g.Q6J("validations",n.fieldsValidators.name),g.xp6(2),g.Q6J("validations",n.fieldsValidators.email),g.xp6(4),g.Q6J("ngTemplateOutlet",t)}}function T(n,t){if(1&n&&(g.TgZ(0,"span",31),g._uU(1),g.qZA()),2&n){const n=g.oxw(2);g.xp6(1),g.Oqu(n.formErrorMesage)}}function A(n,t){1&n&&g.GkF(0)}function q(n,t){if(1&n){const n=g.EpF();g.TgZ(0,"div",17),g.TgZ(1,"form"),g.TgZ(2,"pod-form-field",23,24),g.NdJ("change",function(t){g.CHM(n);const e=g.oxw();return e.checkPasswordMatch(t,e.formValues.repeatedPassword)}),g.qZA(),g.TgZ(4,"pod-form-field",25,26),g.NdJ("change",function(t){g.CHM(n);const e=g.oxw();return e.checkPasswordMatch(e.formValues.password,t)}),g.qZA(),g.YNc(6,T,2,1,"span",27),g.TgZ(7,"button",28),g.NdJ("click",function(t){g.CHM(n);const e=g.MAs(3),s=g.MAs(5);return g.oxw().submit(t,[e,s])}),g._uU(8,"Sign up"),g.qZA(),g.qZA(),g.YNc(9,A,1,0,"ng-container",16),g.TgZ(10,"button",29),g.NdJ("click",function(t){return g.CHM(n),g.oxw().prevStep(t)}),g._UZ(11,"img",30),g._uU(12," Back "),g.qZA(),g.qZA()}if(2&n){const n=g.oxw(),t=g.MAs(12);g.xp6(2),g.Q6J("validations",n.fieldsValidators.password),g.xp6(2),g.Q6J("validations",n.fieldsValidators.password),g.xp6(2),g.Q6J("ngIf",n.formErrorMesage&&!n.passwordsMatch),g.xp6(3),g.Q6J("ngTemplateOutlet",t)}}const y=function(){return["/sign-in"]};function N(n,t){1&n&&(g.TgZ(0,"footer"),g.TgZ(1,"button",32),g._uU(2,"I already have an account, "),g.TgZ(3,"a",33),g._uU(4,"signin"),g.qZA(),g.qZA(),g.qZA()),2&n&&(g.xp6(3),g.Q6J("routerLink",g.DdM(1,y)))}const J=function(n){return{"back-bar":!0,"--active-bar":n}},Q=[{path:"",component:(()=>{class n{constructor(n,t){this.signupService=n,this.router=t,this.unsubscriber=new c.xQ,this.passwordsMatch=!1,this.formValues={name:"",email:"",password:"",repeatedPassword:""},this.signupTotalSteps=2,this.passwordMinSize=8,this.formErrorMesage="",this.currentStep=1,this.steps=[{active:!0,name:"Personal Data",finished:!1},{active:!1,name:"Password",finished:!1}],this.fieldsValidators={name:[{validationName:"required",validationErrorMessage:"Campo obrigat\xf3rio"}],email:[{validationName:"required",validationErrorMessage:"Campo obrigat\xf3rio"},{validationName:"email",validationErrorMessage:"Email inv\xe1lido"}],password:[{validationName:"required",validationErrorMessage:"Campo obrigat\xf3rio"},{validationName:"minLength",validatorRequiredParameter:this.passwordMinSize,validationErrorMessage:"A senha precisa ter pelo menos 8 caracteres"}]}}ngOnInit(){this.steps.map((n,t)=>{t+1<this.currentStep&&(n.active=!0,n.finished=!0)}),this.activeStep(this.currentStep)}submit(n,t){if([!this.validateBeforeGoToNextStep(n,t),!Boolean(""===this.formErrorMesage),!this.passwordsMatch].some(n=>!0===n))return;const[e,s]=t.map(n=>n.value);this.formValues=Object.assign(Object.assign({},this.formValues),{password:e,repeatedPassword:s});const{name:o,email:i,password:r}=this.formValues;this.signupService.signup({name:o,email:i,password:r}).pipe((0,p.R)(this.unsubscriber)).subscribe(n=>{n.body.auth&&this.router.navigate(["/podbooks"])},({error:n})=>this.formErrorMesage=n.message)}checkPasswordMatch(n,t){if(n instanceof Event||t instanceof Event)return;const e=n.toString(),s=t.toString(),o=e.length>=this.passwordMinSize&&s.length>=this.passwordMinSize,i=e===s;this.formValues=Object.assign(Object.assign({},this.formValues),{password:e,repeatedPassword:s}),this.passwordsMatch=i,o&&!this.passwordsMatch||(this.formErrorMesage=""),o&&!this.passwordsMatch&&(this.formErrorMesage="Passwords do not match")}nextStep(n,t){if(!this.validateBeforeGoToNextStep(n,t))return;this.finishCurrentStep(this.currentStep);const[e,s]=t.map(n=>n.input.value);this.formValues=Object.assign(Object.assign({},this.formValues),{name:e,email:s}),(()=>{this.currentStep+=1,this.activeStep(this.currentStep),setTimeout(()=>this.passwordField.fieldRef.nativeElement.focus(),10)})()}validateBeforeGoToNextStep(n,t){return n.preventDefault(),(0,a.O)(t)}prevStep(n){n.preventDefault(),this.disableStep(this.currentStep),(()=>{this.currentStep-=1,this.activeStep(this.currentStep),this.steps[this.currentStep-1].finished=!1})()}activeStep(n){this.steps[n-1].active=!0}disableStep(n){this.steps[n-1].active=!1}finishCurrentStep(n){this.steps[n-1].finished=!0}ngOnDestroy(){this.unsubscriber.next(),this.unsubscriber.complete()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(m),g.Y36(o.F0))},n.\u0275cmp=g.Xpm({type:n,selectors:[["pod-sign-up"]],viewQuery:function(n,t){if(1&n&&(g.Gf(M,5),g.Gf(C,5)),2&n){let n;g.iGM(n=g.CRH())&&(t.passwordField=n.first),g.iGM(n=g.CRH())&&(t.repeatPasswordField=n.first)}},decls:13,vars:8,consts:[[1,"signup"],[1,"steps"],[3,"ngClass"],["class","step",3,"ngClass",4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngSwitchCase"],["firstStep",""],["secondStep",""],["signinAnchor",""],[1,"step",3,"ngClass"],[1,"step-number"],["class","finished-step","src","/assets/icons/check-icon.svg","alt","check icon",4,"ngIf"],[4,"ngIf"],[1,"step-finished"],[1,"step-text"],["src","/assets/icons/check-icon.svg","alt","check icon",1,"finished-step"],[4,"ngTemplateOutlet"],[1,"form-container"],["labelText","Name","type","text",1,"name",3,"validations"],["name",""],["labelText","Email","type","email",1,"email",3,"validations"],["email",""],[1,"next",3,"click"],["labelText","Password","type","password",1,"password",3,"validations","change"],["password",""],["labelText","Confirm password","type","password",1,"repeat-passowrd",3,"validations","change"],["repeatPassword",""],["class","errorMessage",4,"ngIf"],[1,"submit",3,"click"],[1,"back",3,"click"],["src","assets/icons/arrow-left.svg","alt","back icon"],[1,"errorMessage"],[1,"already-have-account"],[3,"routerLink"]],template:function(n,t){1&n&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g._UZ(2,"span",2),g.YNc(3,v,7,7,"div",3),g.qZA(),g.TgZ(4,"div",4),g.YNc(5,w,2,1,"div",5),g.YNc(6,k,2,1,"div",5),g.qZA(),g.qZA(),g.YNc(7,Z,9,3,"ng-template",null,6,g.W1O),g.YNc(9,q,13,4,"ng-template",null,7,g.W1O),g.YNc(11,N,5,2,"ng-template",null,8,g.W1O)),2&n&&(g.xp6(2),g.Q6J("ngClass",g.VKq(6,J,t.currentStep>1)),g.uIk("position",t.currentStep),g.xp6(1),g.Q6J("ngForOf",t.steps),g.xp6(1),g.Q6J("ngSwitch",t.currentStep),g.xp6(1),g.Q6J("ngSwitchCase",1),g.xp6(1),g.Q6J("ngSwitchCase",2))},directives:[s.mk,s.sg,s.RF,s.n9,s.O5,s.tP,h.h,o.yS],styles:["@keyframes appearAnimation{to{opacity:1;transform:translateY(0)}}.signup[_ngcontent-%COMP%]{margin:23rem auto 25rem;opacity:0;transform:translateY(100px);animation:appearAnimation .5s ease-in-out forwards}.signup[_ngcontent-%COMP%]   .steps[_ngcontent-%COMP%]{margin:0 auto;max-width:-moz-fit-content;max-width:fit-content;grid-column-gap:6rem;column-gap:6rem;display:flex;justify-content:center;align-items:center;position:relative}.signup[_ngcontent-%COMP%]   .steps[_ngcontent-%COMP%]   .back-bar[_ngcontent-%COMP%]{display:block;height:2px;width:70%;transform:translateY(-1.7rem);position:absolute;background:#e5e5e5;z-index:0;transition:.5s ease}.signup[_ngcontent-%COMP%]   .steps[_ngcontent-%COMP%]   .back-bar.--active-bar[_ngcontent-%COMP%]{background:#8348ff}.signup[_ngcontent-%COMP%]   .steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]{z-index:1;display:flex;justify-content:center;flex-direction:column}.signup[_ngcontent-%COMP%]   .steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{margin:0 auto;width:4rem;height:4rem;display:block;background:#e5e5e5;padding:13px 16px;border-radius:50%;color:#fff;font-size:1.3rem;transition:.5s ease;cursor:pointer}.signup[_ngcontent-%COMP%]   .steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]   .finished-step[_ngcontent-%COMP%]{width:1.5rem;transform:translate(-3px)}.signup[_ngcontent-%COMP%]   .steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   .step-text[_ngcontent-%COMP%]{margin-top:2rem;color:#e5e5e5;font-size:1rem}.signup[_ngcontent-%COMP%]   .steps[_ngcontent-%COMP%]   .step.--active[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{background:#8348ff}.signup[_ngcontent-%COMP%]   .steps[_ngcontent-%COMP%]   .step.--active[_ngcontent-%COMP%]   .step-text[_ngcontent-%COMP%]{color:#8348ff}.signup[_ngcontent-%COMP%]   .steps[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{height:350px}.signup[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{display:block;max-width:43rem;margin:12rem auto 0}.signup[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:0;cursor:pointer;background:none;transition:.5s}.signup[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.9}.signup[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-bottom:3rem}.signup[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .next[_ngcontent-%COMP%], .signup[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{border-radius:5px;width:100%;padding:1.4rem 2rem;background-color:#8348ff;color:#fff}.signup[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .signup[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .next[_ngcontent-%COMP%], .signup[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%], .signup[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{margin:3rem 0 2rem;display:block}.signup[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .errorMessage[_ngcontent-%COMP%]{color:#da5454;display:block;height:2rem;line-height:3rem}.signup[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .already-have-account[_ngcontent-%COMP%]{color:#c4c4c4;font-weight:300}.signup[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .already-have-account[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#8348ff}.signup[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{margin-top:6rem;color:#8348ff;display:flex;align-items:center}.signup[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:1rem;transform:translateY(1px)}"]}),n})()}];let Y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[o.Bz.forChild(Q)],o.Bz]}),n})(),E=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[s.ez,r.I,i.k,o.Bz,Y]]}),n})()}}]);